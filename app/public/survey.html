<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Survey</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"> -->

    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script> -->
    <script
    src="https://code.jquery.com/jquery-3.3.1.js"
    integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>
<body>
    	<main>
                <div class="container">
                    <div class="row">
                        <div class="col s12 z-depth-5 mainpanel">
                            <div id="mainpanel-content">
                                <h1 id="surveyFont"><i class="fas fa-clipboard-list"></i> Survey Questions</h1>
                                <div class="divider"></div>
                                <h3>About You:</h3>
                                <br>
                                <div class="input-field col s6">
                                    <h5><i class="fas fa-user"></i> Name (Required)</h5>                                    
                                    <input type="text" class="validate" placeholder="Your Name Here" id="userName">
                                </div>
                                <br>
                                <div class="input-field col s6">
                                    <h5><i class="fas fa-image"></i> Link to Photo Image (Required)</h5>                                    
                                    <input type="text" class="validate" placeholder="Photo Link Here" id="userPhoto">
                                </div>
                                <br>
                                <!-- Survey Questions -->
                                <div class="questions input-field col s12">
                                    <h3>Question 1</h3>
                                    <h5>You are the type to go get out there and explore!</h5>
                                    <select id="question1">
                                        <option value="" disabled selected>Choose your option</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                                
                                <div class="input-field col s12">
                                    <h3>Question 2</h3>
                                    <h5>In general, you take more realistic measures rather than risky or avant-guarde ones.</h5>
                                    <select id="question2">
                                        <option value="" disabled selected>Choose your option</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
        
                                <div class="questions input-field col s12">
                                    <h3>Question 3</h3>
                                    <h5>You would be able to sit around and just think for a while.</h5>
                                    <select id="question3">
                                        <option value="" disabled selected>Choose your option</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
        
                                <div class="input-field col s12">
                                    <h3>Question 4</h3>
                                    <h5>For you, there must be a reason behind everything.</h5>
                                    <select id="question4">
                                        <option value="" disabled selected>Choose your option</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
        
                                <div class="questions input-field col s12">
                                    <h3>Question 5</h3>
                                    <h5>You are the type to stay calm and collected in especially stressful situations.</h5>
                                    <select id="question5">
                                        <option value="" disabled selected>Choose your option</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
        
                                <div class="input-field col s12">
                                    <h3>Question 6</h3>
                                    <h5>It is more important to choose reason over emotion.</h5>
                                    <select id="question6">
                                        <option value="" disabled selected>Choose your option</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
        
                                <div class="questions input-field col s12">
                                    <h3>Question 7</h3>
                                    <h5>It is okay to hurt someone's feelings if the it is the truth.</h5>
                                    <select id="question7">
                                        <option value="" disabled selected>Choose your option</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
        
                                <div class="input-field col s12">
                                    <h3>Question 8</h3>
                                    <h5>You enjoy spending time with others.</h5>
                                    <select id="question8">
                                        <option value="" disabled selected>Choose your option</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
        
                                <div class="questions input-field col s12">
                                    <h3>Question 9</h3>
                                    <h5>You think that everyone should have a say in a discussion, regardless of their beliefs.</h5>
                                    <select id="question9">
                                        <option value="" disabled selected>Choose your option</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                                
                                <div class="input-field col s12">
                                    <h3>Question 10</h3>
                                    <h5>You love animals more than people.</h5>
                                    <select id="question10">
                                        <option value="" disabled selected>Choose your option</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                                <br>
                                <!-- Survey Submit Button -->
                                <div>
                                    <button class="btn btn-outline-dark" type="submit" name="action" id="submitButton">Submit Responses
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            <div class="footer">
                <h5 class="white-text">Links</h5>
                <ul>
                <li><a class="grey-text text-lighten-3" href="/api/friends">API Friends List</a></li>
                </ul>
            </div>
             
            <div id="modal1" class="modal">
                    <div class="modal-content">
                        <h4>Closest Friend Match</h4>
                        <div class="divider"></div>
                        <h5 id="userMatch"></h5>
                        <img id="userMatchImage" class="materialboxed" width="650" src="">
                    </div>
                    <div class="modal-footer">
                        <a href="/survey" class="modal-action modal-close">Fill Again!</a>
                    </div>
                </div>
                <script type="text/javascript">
                    // Activate submit button
                    $('#submitButton').on('click', function(event) {
                        event.preventDefault();
                       $('select').select();
                        $('.modal').modal({
                            dismissible: false, // Modal can be dismissed by clicking outside of the modal
                            opacity: .5, // Opacity of modal background
                            inDuration: 300, // Transition in duration
                            outDuration: 200, // Transition out duration
                            startingTop: '4%', // Starting top style attribute
                            endingTop: '10%' // Ending top style attribute
                        })
                    
                        // Gather user inputs
                        var userInput = {
                            name: $('#userName').val().trim(),
                            photo: $('#userPhoto').val().trim(),
                            scores:[
                                $('#question1').val().trim(),
                                $('#question2').val().trim(),
                                $('#question3').val().trim(),
                                $('#question4').val().trim(),
                                $('#question5').val().trim(),
                                $('#question6').val().trim(),
                                $('#question7').val().trim(),
                                $('#question8').val().trim(),
                                $('#question9').val().trim(),
                                $('#question10').val().trim()
                            ]
                        };
                        // console.log('userInput = ' + JSON.stringify(userInput));
                        // Add user inputs to friends list
                        $.post('/api/friends', userInput)
                          .done(function(data) {
                              // console.log('response = ' + JSON.stringify(data));
                              // Set the name and image values of friend match
                              $('#userMatch').html(data.matchName);
                            $("#userMatchImage").attr("src", data.matchImage);
                            // Pop open the modal dialog
                              $('#modal1').modal('open');
                          });
                    });
                </script>
            
</body>
</html>